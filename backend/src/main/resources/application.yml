spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/librarymanage
    username: postgres
    password: mgmg0530
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 60000

  jpa:
    hibernate:
      ddl-auto: none
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect

  flyway:
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: false
    out-of-order: true
    clean-disabled: false
    baseline-version: 1
    baseline-description: "Initial baseline"

  batch:
    job:
      enabled: false
    jdbc:
      initialize-schema: always

  mail:
    host: smtp.gmail.com
    port: 587
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
  
  web:
    cors:
      allowed-origins: 
        - "http://localhost:3000"
        - "http://127.0.0.1:3000"
      allowed-methods: "*"
      allowed-headers: "*"
  
  http:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

server:
  port: 8080
  servlet:
    encoding:
      charset: UTF-8
      force: true

logging:
  level:
    org.springframework.web: DEBUG
    org.hibernate.SQL: DEBUG

# JWT設定
app:
  jwtSecret: mySecretKeyForLibraryManagementSystem2024!@#$%^&*()_EXTENDED_FOR_HS512_ALGORITHM_MINIMUM_LENGTH_REQUIREMENT
  jwtExpirationMs: 3600000    # 1時間 (60 * 60 * 1000)
  jwtRefreshExpirationMs: 604800000  # 7日間 (7 * 24 * 60 * 60 * 1000)

  # 帳票設定
  reports:
    storage-path: ./reports           # 帳票ファイル保存パス
    expiry-days: 7                   # ファイル保持期間（日）
    max-file-size: 104857600         # 最大ファイルサイズ（100MB）
    max-total-size: 5368709120       # 最大総容量（5GB）
    cleanup:
      enabled: true                  # 自動クリーンアップ有効化
      orphaned-files: true           # 孤立ファイルクリーンアップ

    # PDF設定
    pdf:
      font-path: fonts/NotoSansCJK-Regular.ttc,0  # 日本語フォントパス
      use-html-template: false       # HTMLテンプレート使用フラグ
      page-size: A4                  # ページサイズ
      margin: 2cm                    # マージン

    # Excel設定
    excel:
      auto-size-columns: true        # 列幅自動調整

  # キャッシュ設定
  report:
    cache:
      enabled: true                  # キャッシュ有効化
      default-ttl-minutes: 30        # デフォルトTTL（30分）
      max-size-mb: 1000             # 最大キャッシュサイズ（1GB）
      max-entries-per-user: 20       # ユーザー当たり最大エントリ数
      cleanup-interval-minutes: 15   # クリーンアップ間隔（15分）
      # システム統計レポート専用設定
      system-report-ttl-minutes: 60  # システムレポートTTL（60分）